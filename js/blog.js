/**
 * ═══════════════════════════════════════════════════════════════
 *  BLOG ENGINE — Data + Listing + Post Rendering
 *  5 SEO-Optimized Articles for Elan's Tech World
 * ═══════════════════════════════════════════════════════════════
 */

// ─── BLOG DATA ────────────────────────────────────────────────
const BLOG_POSTS = [
  {
    slug: 'does-your-small-business-need-a-website',
    title: 'Does Your Small Business Really Need a Website in 2025?',
    titleHtml: 'Does Your Small Business Really Need a Website in <em>2025?</em>',
    excerpt: 'Social media is free. Google Business is easy. So why do businesses that invest in a real website consistently outperform those that don\'t? Here\'s the data-backed answer.',
    category: 'web-design',
    categoryLabel: 'Web Design',
    date: '2025-01-28',
    readTime: '7 min read',
    featured: true,
    image: 'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800&q=80',
    seoTitle: 'Does Your Small Business Need a Website in 2025? | Elan\'s Tech World',
    seoDesc: 'Data shows 75% of consumers judge a business by its website. Learn why a professional site beats social media alone for NYC small businesses.',
    body: `
      <h2>The Short Answer: <em>Absolutely</em></h2>
      <p>If you're running a small business in New York City — whether it's a salon in Queens, a restaurant in Brooklyn, or a law office in Manhattan — your website isn't optional anymore. It's the foundation everything else sits on.</p>
      <p>We hear it all the time: <strong>"I have an Instagram page, why do I need a website?"</strong> It's a fair question. But the data tells a story that might surprise you.</p>

      <blockquote><p>75% of consumers admit to judging a company's credibility based on their website design. That first impression takes less than 0.05 seconds.</p></blockquote>

      <h2>Social Media Is Rented <em>Land</em></h2>
      <p>Here's the uncomfortable truth about building your business entirely on Instagram or Facebook: you don't own it. Meta's algorithm decides who sees your posts. Your reach can drop 80% overnight with a single algorithm change — and it has, repeatedly.</p>
      <p>A website is property you own. Your domain, your design, your content, your rules. No algorithm standing between you and your customers. When someone Googles "best salon near me" or "web designer in Queens," your website is what shows up — not your Instagram reel from three weeks ago.</p>

      <h2>What a Website Does That Social Media <em>Can't</em></h2>
      <ul>
        <li><strong>Ranks on Google.</strong> Your Instagram page won't show up when someone searches "plumber in Forest Hills." A properly optimized website will.</li>
        <li><strong>Builds instant credibility.</strong> Before a customer calls, they check your site. If you don't have one — or it looks like it was built in 2012 — they move on to a competitor who does.</li>
        <li><strong>Works 24/7.</strong> Your website takes bookings, answers questions, and sells products while you sleep. Try doing that with an Instagram DM.</li>
        <li><strong>Collects data.</strong> Google Analytics tells you exactly who visits, where they come from, and what they're interested in. Social media gives you likes. There's a difference.</li>
        <li><strong>Scales with you.</strong> Need to add e-commerce? A booking system? A client portal? Your website grows as your business grows.</li>
      </ul>

      <div class="post-divider"></div>

      <h2>But I'm a Small Business — Can I <em>Afford</em> One?</h2>
      <p>A better question is: can you afford not to have one? Consider this: businesses with professional websites generate an average of 30–50% more revenue than those relying solely on social media. The math isn't close.</p>
      <p>Modern web development has also become more accessible. You don't need a $50,000 enterprise site. A well-designed, SEO-optimized site built by professionals who understand your industry and your local market can transform your business within months.</p>

      <h2>The Bottom <em>Line</em></h2>
      <p>Social media is a megaphone. A website is your storefront. You need both, but if you had to choose one foundation to build on, the website wins every time. It's the asset you own, the experience you control, and the platform that compounds in value as you invest in it.</p>
      <p>If you've been on the fence, 2025 is the year to stop renting and start building.</p>
    `
  },

  {
    slug: 'google-ads-vs-seo-where-to-invest',
    title: 'Google Ads vs SEO: Where Should Your Marketing Budget Go?',
    titleHtml: 'Google Ads vs SEO: Where Should Your Marketing <em>Budget</em> Go?',
    excerpt: 'One gives you instant traffic. The other builds a compounding asset. Here\'s how to decide which strategy — or which mix — is right for your business.',
    category: 'marketing',
    categoryLabel: 'Marketing',
    date: '2025-02-03',
    readTime: '8 min read',
    featured: false,
    image: 'https://images.unsplash.com/photo-1553877522-43269d4ea984?w=800&q=80',
    seoTitle: 'Google Ads vs SEO for Small Businesses — Which Is Better? | Elan\'s Tech World',
    seoDesc: 'Should your NYC business invest in Google Ads or SEO? We break down the pros, cons, costs, and ideal strategy for each approach.',
    body: `
      <h2>The Real <em>Question</em></h2>
      <p>This isn't actually an "either/or" debate — it's a "when and how much" conversation. Both Google Ads and SEO drive qualified traffic to your business, but they work on completely different timelines and with different mechanics.</p>
      <p>Understanding those differences is the key to spending your marketing dollars wisely instead of throwing money into a black hole and hoping something sticks.</p>

      <h2>Google Ads: The <em>Accelerator</em></h2>
      <p>Google Ads puts you at the top of search results immediately. Someone searches "web designer NYC" and your ad appears above every organic result. You pay per click, and the traffic starts flowing the moment your campaign goes live.</p>
      <p><strong>Best for:</strong> New businesses that need leads now, product launches, seasonal promotions, testing which keywords actually convert before investing in SEO, and competitive industries where organic rankings take months to build.</p>
      <p><strong>The catch:</strong> The moment you stop paying, the traffic stops. It's a faucet — turn it on, water flows; turn it off, it doesn't. You're renting visibility, not building it.</p>

      <h2>SEO: The <em>Compound Investment</em></h2>
      <p>SEO is the long game. It takes 3–6 months to see meaningful results, but once you rank, that traffic is essentially free. A blog post you write today can drive leads for years. A properly optimized service page can generate calls every single day without spending another dollar.</p>
      <p><strong>Best for:</strong> Established businesses building long-term authority, local businesses targeting "near me" searches, content-rich industries, and anyone who wants to reduce their dependence on paid advertising over time.</p>
      <p><strong>The catch:</strong> It requires patience and consistent effort. Google's algorithm changes. Competitors are also investing in SEO. It's a marathon, not a sprint.</p>

      <blockquote><p>The businesses that win aren't choosing between Google Ads and SEO — they're using Ads to drive revenue today while building SEO as the asset that drives revenue tomorrow.</p></blockquote>

      <h2>The Smart <em>Strategy</em></h2>
      <p>Here's what we recommend for most small businesses:</p>
      <ol>
        <li><strong>Start with Google Ads</strong> to generate immediate leads and learn which keywords your customers actually use.</li>
        <li><strong>Invest in SEO simultaneously</strong> — optimize your site structure, create valuable content, build local citations, and earn backlinks.</li>
        <li><strong>Shift budget gradually.</strong> As organic rankings climb, reduce ad spend on keywords where you rank naturally. Redirect that budget to new keyword opportunities.</li>
        <li><strong>Never turn off Ads completely.</strong> Keep them running for high-intent commercial keywords, retargeting, and new market testing.</li>
      </ol>

      <div class="post-divider"></div>

      <h2>What This Looks Like in <em>Practice</em></h2>
      <p>One of our clients — a beauty salon in Queens — started with 100% Google Ads. Within three months, we identified their top-converting keywords. We then built SEO content around those exact terms. Six months later, organic traffic accounted for 60% of their bookings, and their ad spend dropped by 40% while total leads increased.</p>
      <p>That's the power of using both channels strategically instead of picking one and hoping for the best.</p>
    `
  },

  {
    slug: '5-signs-your-website-is-losing-customers',
    title: '5 Signs Your Website Is Secretly Losing You Customers',
    titleHtml: '5 Signs Your Website Is Secretly <em>Losing</em> You Customers',
    excerpt: 'Your website might look fine to you. But if it\'s committing any of these five sins, it\'s quietly driving potential customers straight to your competitors.',
    category: 'web-design',
    categoryLabel: 'Web Design',
    date: '2025-01-15',
    readTime: '6 min read',
    featured: false,
    image: 'https://images.unsplash.com/photo-1504868584819-f8e8b4b6d7e3?w=800&q=80',
    seoTitle: '5 Signs Your Website Is Losing Customers — Fix Them Now | Elan\'s Tech World',
    seoDesc: 'Slow load times, no mobile optimization, missing CTAs — discover the 5 hidden website problems costing your business customers and revenue.',
    body: `
      <h2>Your Website Looks Fine. <em>Doesn't It?</em></h2>
      <p>Here's the thing about a website that's losing you money: it doesn't announce itself. There's no flashing red light. No error message. Customers just... leave. They visit, they look around for three seconds, and they click the back button. You never know they were there, and you never know why they left.</p>
      <p>After building and auditing hundreds of websites, we've identified the five most common silent killers. If your site is guilty of even one of these, you're losing revenue every single day.</p>

      <h2>1. It Takes More Than 3 Seconds to <em>Load</em></h2>
      <p>This is the single biggest conversion killer on the internet. Google's own research shows that 53% of mobile visitors abandon a site that takes longer than 3 seconds to load. Not 10 seconds. Not 5. Three.</p>
      <p>And it's not just about impatient users — Google uses page speed as a ranking factor. A slow website gets pushed down in search results, which means fewer people find you in the first place.</p>
      <p><strong>Quick test:</strong> Pull out your phone right now and visit your website. Count the seconds. If you're waiting, so are your customers.</p>

      <h2>2. It's Not Optimized for <em>Mobile</em></h2>
      <p>Over 65% of all web traffic now comes from mobile devices. If your site isn't responsive — meaning it doesn't automatically adapt to look perfect on every screen size — you're turning away two-thirds of your potential customers.</p>
      <p>And "looks okay on my phone" isn't good enough. Buttons need to be tappable without zooming. Text needs to be readable without pinching. Forms need to work with a thumb. The experience needs to feel native to the device.</p>

      <h2>3. There's No Clear Call to <em>Action</em></h2>
      <p>Someone lands on your homepage. They like what they see. Now what? If the answer isn't immediately obvious — a prominent "Book Now" button, a "Call Us" link, a "Get a Free Quote" form — they'll leave. Not because they weren't interested, but because you didn't tell them what to do next.</p>
      <p>Every single page on your website should have a clear, compelling next step. Make it easy for people to give you their money.</p>

      <h2>4. Your Content Hasn't Been Updated in <em>Months</em></h2>
      <p>A website with outdated information — old hours, discontinued services, a copyright that says "2021" — signals one thing to visitors: this business doesn't care about details. And if they don't care about their website, will they care about my order? My appointment? My project?</p>
      <p>Fresh content also matters for SEO. Google rewards websites that are regularly updated with new, relevant content. A blog post once a month can make a meaningful difference in your search rankings.</p>

      <h2>5. It Doesn't Feel <em>Trustworthy</em></h2>
      <p>Trust signals are the subtle design elements that tell visitors "this is a legitimate, professional business." Without them, everything else falls flat.</p>
      <ul>
        <li>No SSL certificate (the padlock icon in the browser)</li>
        <li>No customer reviews or testimonials displayed</li>
        <li>No real photos — just generic stock images</li>
        <li>No physical address or phone number visible</li>
        <li>Outdated design that looks like it belongs in 2015</li>
      </ul>

      <div class="post-divider"></div>

      <h2>The Good <em>News</em></h2>
      <p>Every single one of these problems is fixable. Some are quick wins — adding a call-to-action button, updating your footer, installing an SSL certificate. Others require a more comprehensive approach, like a full site rebuild or a mobile-first redesign.</p>
      <p>The first step is simply awareness. Now that you know what to look for, audit your own site with fresh eyes. Better yet, ask someone who's never visited it before to walk through it while you watch. You'll learn more in five minutes than you'd expect.</p>
    `
  },

  {
    slug: 'why-professional-signage-matters',
    title: 'Why Professional Signage Is Your Best Silent Salesperson',
    titleHtml: 'Why Professional Signage Is Your Best Silent <em>Salesperson</em>',
    excerpt: 'Before anyone checks your website, they walk past your storefront. In a city like New York, you have about three seconds to make them stop. Here\'s how to win those seconds.',
    category: 'signage',
    categoryLabel: 'Signage',
    date: '2025-01-20',
    readTime: '6 min read',
    featured: false,
    image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSk05xiZj1_eYaUxglnkrW9CFLXoy28irb_Hg&s',
    seoTitle: 'Why Professional Storefront Signage Matters for NYC Businesses | Elan\'s Tech World',
    seoDesc: 'Custom storefront signage drives 45% more foot traffic. Learn why professional signs are the most cost-effective marketing investment for NYC businesses.',
    body: `
      <h2>The 3-Second <em>Window</em></h2>
      <p>In New York City, the average pedestrian passes hundreds of storefronts every day. Most of them blur into background noise. But every once in a while, a sign stops them. Something about it — the design, the lighting, the sheer quality of the craftsmanship — makes them pause, look, and walk through the door.</p>
      <p>That three-second window is the most valuable marketing real estate your business has. And unlike Google Ads or social media, you pay for signage once and it works for you 24 hours a day, 365 days a year.</p>

      <blockquote><p>According to the Sign Research Foundation, nearly 76% of consumers have entered a store they've never visited before based purely on its signage.</p></blockquote>

      <h2>First Impressions Are <em>Visual</em></h2>
      <p>Your sign is the very first thing a potential customer experiences from your brand. Before they see your menu, your products, or your staff — they see your sign. It communicates everything in an instant: Are you professional? Are you modern? Are you premium? Are you affordable? Are you trustworthy?</p>
      <p>A hand-painted sign on a piece of plywood communicates something very different than illuminated channel letters on a clean facade. Neither is inherently wrong, but each sends a specific message. The question is whether your sign is sending the message you intend.</p>

      <h2>The ROI Nobody Talks <em>About</em></h2>
      <p>Professional signage is one of the most cost-effective marketing investments a business can make. Here's why the numbers work:</p>
      <ul>
        <li><strong>One-time cost, perpetual returns.</strong> Unlike ads that require monthly spend, a quality sign lasts 7–10+ years with proper maintenance.</li>
        <li><strong>Thousands of impressions daily.</strong> A sign on a busy NYC street can generate 10,000–50,000 impressions per day. Calculate your cost-per-impression over 5 years and it's fractions of a penny.</li>
        <li><strong>Drives both foot traffic and brand recall.</strong> Even people who don't walk in today remember you for tomorrow.</li>
        <li><strong>Reinforces your digital presence.</strong> When someone sees your sign and later Googles your business name, that's a warm lead — not a cold click.</li>
      </ul>

      <h2>What Great Signage Looks <em>Like</em></h2>
      <p><strong>Readable from a distance.</strong> If someone can't read your sign from across the street, it's too small, too cluttered, or the contrast is too low. Simplicity wins.</p>
      <p><strong>Consistent with your brand.</strong> Your sign should feel like a natural extension of your website, your business cards, and your interior design. One cohesive brand experience, not a disconnected patchwork.</p>
      <p><strong>Professionally fabricated.</strong> Materials matter. Acrylic, aluminum composite, dimensional letters, LED illumination — these aren't just aesthetic choices, they're durability choices. Cheap materials degrade fast, especially in NYC weather.</p>
      <p><strong>Properly permitted.</strong> NYC has specific signage regulations that vary by borough and zoning district. Professional signage companies handle permit coordination so you don't get hit with fines or forced removal.</p>

      <div class="post-divider"></div>

      <h2>The Bridge Between Digital and <em>Physical</em></h2>
      <p>The smartest businesses treat signage and digital presence as two halves of the same strategy. Your sign drives someone to Google you. Your website converts them into a customer. Your signage reinforces the brand every time they pass by afterward.</p>
      <p>If you're investing in a beautiful website but your storefront still has a faded vinyl banner from five years ago, there's a disconnect — and your customers feel it, even if they can't articulate why.</p>
    `
  },

  {
    slug: 'shopify-vs-diy-ecommerce',
    title: 'Shopify vs DIY: Why Smart Brands Are Choosing Professional E-Commerce',
    titleHtml: 'Shopify vs DIY: Why Smart Brands Are Choosing Professional <em>E-Commerce</em>',
    excerpt: 'Wix, Squarespace, and WordPress templates promise you can build a store in a weekend. Here\'s what they don\'t tell you about what happens after launch.',
    category: 'ecommerce',
    categoryLabel: 'E-Commerce',
    date: '2025-02-06',
    readTime: '7 min read',
    featured: false,
    image: 'https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&q=80',
    seoTitle: 'Shopify vs DIY E-Commerce — Why Professional Setup Wins | Elan\'s Tech World',
    seoDesc: 'DIY e-commerce platforms promise easy setup but hide conversion-killing problems. Learn why professionally built Shopify stores outperform DIY by 3-5x.',
    body: `
      <h2>The DIY <em>Trap</em></h2>
      <p>Let's be honest: the marketing from platforms like Wix, Squarespace, and even Shopify itself makes it seem like anyone can build a successful online store in a weekend. Drag, drop, publish, profit.</p>
      <p>And technically, you can build <em>a</em> store. But building a store and building a store that actually converts — that's a completely different thing. The gap between the two is where most DIY e-commerce businesses quietly fail.</p>

      <h2>What DIY Gets <em>Wrong</em></h2>
      <p><strong>Generic templates look generic.</strong> When 10,000 other stores use the same Shopify theme with the same layout and the same stock photos, you don't stand out. Customers sense it. Trust drops. So do conversions.</p>
      <p><strong>Product pages that don't sell.</strong> A photo and a price isn't a product page — it's a listing. High-converting product pages use strategic copywriting, benefit-driven descriptions, social proof, urgency elements, and carefully chosen image sequences. This is a skill, not a template feature.</p>
      <p><strong>Checkout friction kills sales.</strong> Every unnecessary form field, every confusing step, every moment of doubt in the checkout process costs you money. The average cart abandonment rate is over 70%. Professional optimization can cut that dramatically.</p>
      <p><strong>No SEO foundation.</strong> DIY builders rarely set up proper URL structures, meta tags, schema markup, or site architecture for search engines. Your products become invisible to Google.</p>

      <blockquote><p>Professionally built e-commerce stores convert at 2–5x the rate of DIY setups. When your traffic stays the same but your conversion rate triples, the impact on revenue is immediate.</p></blockquote>

      <h2>What Professional E-Commerce <em>Looks Like</em></h2>
      <ul>
        <li><strong>Custom design</strong> that reflects your brand, not a template that reflects a theme developer's idea of "modern."</li>
        <li><strong>Conversion-optimized product pages</strong> with strategic layouts, compelling copy, and trust signals placed where data shows they work best.</li>
        <li><strong>Streamlined checkout</strong> with minimal steps, multiple payment options (Apple Pay, Google Pay, Shop Pay), and abandoned cart recovery sequences.</li>
        <li><strong>SEO from day one</strong> — proper URL structure, schema markup for products, optimized images, and a content strategy that drives organic traffic.</li>
        <li><strong>Analytics and tracking</strong> — knowing exactly where your customers come from, where they drop off, and what makes them buy.</li>
        <li><strong>Integrations that work</strong> — inventory management, email marketing, accounting software, shipping calculators, all connected seamlessly.</li>
      </ul>

      <h2>The Real Cost of <em>"Free"</em></h2>
      <p>The DIY approach seems cheaper upfront, but factor in your time (dozens of hours learning, building, troubleshooting), lost sales from a suboptimal store, and the eventual cost of hiring someone to fix everything — and the "savings" evaporate fast.</p>
      <p>One of our clients launched a skincare brand on a DIY Shopify setup. After three months of disappointing sales, we rebuilt their store from scratch. Same products, same traffic sources, same ad spend. Sales increased over 300% in the first month. The difference wasn't the products — it was the experience.</p>

      <div class="post-divider"></div>

      <h2>When DIY <em>Does</em> Make Sense</h2>
      <p>We're not anti-DIY across the board. If you're testing a product idea with a tiny budget and need to validate demand before investing, a basic Shopify store with a clean free theme is perfectly fine. Ship fast, test the market, see if people buy.</p>
      <p>But the moment you have product-market fit — the moment you know people want what you're selling — that's when professional e-commerce pays for itself many times over. Every dollar you invest in the buying experience multiplies through every transaction that follows.</p>
    `
  }
];

// ─── UTILITY ──────────────────────────────────────────────────
const formatDate = d => new Date(d + 'T12:00:00').toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });

const cardArrowSvg = '<svg width="12" height="12" viewBox="0 0 14 14" fill="none"><path d="M1 7H13M13 7L7 1M13 7L7 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>';

// ─── BLOG LISTING PAGE ───────────────────────────────────────
class BlogListing {
  constructor() {
    this.featuredEl = document.getElementById('featuredPost');
    this.gridEl = document.getElementById('blogGrid');
    this.filtersEl = document.getElementById('blogFilters');
    this.currentFilter = 'all';
  }

  init() {
    if (!this.gridEl) return;
    this.renderFeatured();
    this.renderGrid();
    this.bindFilters();
  }

  renderFeatured() {
    if (!this.featuredEl) return;
    const post = BLOG_POSTS.find(p => p.featured);
    if (!post) return;

    this.featuredEl.innerHTML = `
      <a href="blog-post.html?slug=${post.slug}" class="featured-post">
        <div class="featured-post-image">
          <img src="${post.image}" alt="${post.title}" loading="lazy">
        </div>
        <div class="featured-post-body">
          <span class="featured-badge"><i class="fas fa-fire"></i> Featured Article</span>
          <div class="featured-post-meta">
            <span>${post.categoryLabel}</span>
            <span class="meta-dot"></span>
            <span>${post.readTime}</span>
            <span class="meta-dot"></span>
            <span>${formatDate(post.date)}</span>
          </div>
          <h2>${post.titleHtml}</h2>
          <p>${post.excerpt}</p>
          <span class="featured-read-link">
            Read Article ${cardArrowSvg}
          </span>
        </div>
      </a>`;
  }

  renderGrid(filter = 'all') {
    const posts = BLOG_POSTS.filter(p => !p.featured)
      .filter(p => filter === 'all' || p.category === filter);

    if (!posts.length) {
      this.gridEl.innerHTML = `<div class="blog-empty"><i class="fas fa-search"></i><p>No posts in this category yet. Check back soon!</p></div>`;
      return;
    }

    this.gridEl.innerHTML = posts.map(p => this.cardHtml(p)).join('');
  }

  cardHtml(p) {
    return `
      <a href="blog-post.html?slug=${p.slug}" class="blog-card" data-category="${p.category}">
        <div class="blog-card-image">
          <img src="${p.image}" alt="${p.title}" loading="lazy">
        </div>
        <div class="blog-card-body">
          <span class="blog-card-cat">${p.categoryLabel}</span>
          <h3>${p.title}</h3>
          <p>${p.excerpt}</p>
          <div class="blog-card-footer">
            <span class="blog-card-date">${formatDate(p.date)}</span>
            <span class="blog-card-read">Read ${cardArrowSvg}</span>
          </div>
        </div>
      </a>`;
  }

  bindFilters() {
    if (!this.filtersEl) return;
    this.filtersEl.addEventListener('click', e => {
      const btn = e.target.closest('.blog-filter-btn');
      if (!btn) return;
      this.filtersEl.querySelectorAll('.blog-filter-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      this.currentFilter = btn.dataset.filter;
      this.renderGrid(this.currentFilter);
    });
  }
}

// ─── BLOG POST PAGE ──────────────────────────────────────────
class BlogPost {
  constructor() {
    this.titleEl = document.getElementById('postTitle');
    this.metaEl = document.getElementById('postMeta');
    this.excerptEl = document.getElementById('postExcerpt');
    this.authorEl = document.getElementById('postAuthor');
    this.bodyEl = document.getElementById('postBody');
    this.relatedEl = document.getElementById('relatedPosts');
    this.schemaEl = document.getElementById('postSchema');
  }

  init() {
    if (!this.bodyEl) return;

    const slug = new URLSearchParams(window.location.search).get('slug');
    const post = BLOG_POSTS.find(p => p.slug === slug);

    if (!post) {
      this.bodyEl.innerHTML = '<p style="text-align:center;padding:4rem 0;color:var(--text-muted);">Post not found. <a href="blog.html" style="color:var(--hermes)">Return to blog</a></p>';
      return;
    }

    this.render(post);
    this.renderRelated(post);
    this.updateSEO(post);
  }

  render(p) {
    document.title = p.seoTitle;

    if (this.titleEl) this.titleEl.textContent = p.title;
    if (this.excerptEl) this.excerptEl.textContent = p.excerpt;

    if (this.metaEl) {
      this.metaEl.innerHTML = `
        <span class="post-cat-badge">${p.categoryLabel}</span>
        <span class="meta-dot"></span>
        <span>${p.readTime}</span>
        <span class="meta-dot"></span>
        <span>${formatDate(p.date)}</span>`;
    }

    if (this.authorEl) {
      this.authorEl.innerHTML = `
        <div class="post-author-avatar">
          <img src="../assets/images/Elanslogo.jpeg" alt="Elan's Tech World">
        </div>
        <div>
          <div class="post-author-name">Elan's Tech World</div>
          <div class="post-author-role">Digital Atelier — New York</div>
        </div>`;
    }

    if (this.bodyEl) this.bodyEl.innerHTML = p.body;
  }

  renderRelated(current) {
    if (!this.relatedEl) return;
    const related = BLOG_POSTS
      .filter(p => p.slug !== current.slug)
      .sort(() => Math.random() - 0.5)
      .slice(0, 3);

    const listing = new BlogListing();
    this.relatedEl.innerHTML = related.map(p => listing.cardHtml(p)).join('');
  }

  updateSEO(p) {
    const setMeta = (attr, val, prop) => {
      let el = document.querySelector(`meta[${attr}="${prop}"]`);
      if (el) el.setAttribute('content', val);
    };

    setMeta('name', p.seoDesc, 'description');
    setMeta('property', p.seoTitle, 'og:title');
    setMeta('property', p.seoDesc, 'og:description');
    setMeta('property', `https://www.elanstechworld.com/pages/blog-post.html?slug=${p.slug}`, 'og:url');
    setMeta('property', p.image, 'og:image');
    setMeta('name', p.seoTitle, 'twitter:title');
    setMeta('name', p.seoDesc, 'twitter:description');
    setMeta('name', p.image, 'twitter:image');

    // Canonical
    let canon = document.querySelector('link[rel="canonical"]');
    if (!canon) {
      canon = document.createElement('link');
      canon.rel = 'canonical';
      document.head.appendChild(canon);
    }
    canon.href = `https://www.elanstechworld.com/pages/blog-post.html?slug=${p.slug}`;

    // Schema
    if (this.schemaEl) {
      this.schemaEl.textContent = JSON.stringify({
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "headline": p.title,
        "description": p.seoDesc,
        "image": p.image,
        "datePublished": p.date,
        "dateModified": p.date,
        "author": { "@type": "Organization", "name": "Elan's Tech World" },
        "publisher": {
          "@type": "Organization",
          "name": "Elan's Tech World",
          "logo": { "@type": "ImageObject", "url": "https://www.elanstechworld.com/assets/images/Elanslogo.jpeg" }
        },
        "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": `https://www.elanstechworld.com/pages/blog-post.html?slug=${p.slug}`
        }
      });
    }
  }
}

// ─── INIT ─────────────────────────────────────────────────────
document.addEventListener('DOMContentLoaded', () => {
  // Detect which page we're on
  const isListing = document.getElementById('blogGrid');
  const isPost = document.getElementById('postBody');

  if (isListing) new BlogListing().init();
  if (isPost) new BlogPost().init();

  // Keep header scrolled
  const header = document.getElementById('header');
  if (header) header.classList.add('scrolled');
});
